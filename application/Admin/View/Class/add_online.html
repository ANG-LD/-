<php>	$uid = $_GET['uid'];	$_GET['uid']?$text='班级编辑':$text='班级添加';</php>{:W('public/breadcrumbs',[[['href'=>U('Class/online'),'text'=>'线上班级'],['href'=>'','text'=>$text]]])}<style>	.ibutton { padding: 3px 15px; *padding: 0 15px; *height: 24px;  font-size: 12px; text-align: center; text-shadow: #CF510B 0 1px 0; border:1px solid #ec5c0d; border-radius: 2px; background: #FC750A; background-image: -webkit-linear-gradient(top, #fc8746, #ec5d0e); color:#FFF; cursor: pointer; display: inline-block; }	/*a  upload */	.a-upload {		padding: 4px 10px;		height: 20px;		line-height: 20px;		position: relative;		cursor: pointer;		color: #888;		background: #fafafa;		border: 1px solid #ddd;		border-radius: 4px;		overflow: hidden;		display: inline-block;		*display: inline;		*zoom: 1	}	.a-upload  input {		position: absolute;		font-size: 100px;		right: 0;		top: 0;		opacity: 0;		filter: alpha(opacity=0);		cursor: pointer	}	.a-upload:hover {		color: #444;		background: #eee;		border-color: #ccc;		text-decoration: none	}</style><div class="page-container">	<div id="big"></div>	<div id="big2"></div>	<form class="form form-horizontal" id="form" method="post">		<div class="row cl">			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>班级名称：</label>			<div class="formControls col-xs-8 col-sm-9">				<input type="text" name="name" class="input-text" value="{$re['name']}" placeholder="班级名称" id="name" />			</div>		</div>		<div class="row cl">			<label class="form-label col-xs-4 col-sm-2">导师：</label>			<div class="formControls col-xs-8 col-sm-9"> <span class="select-box">				<select name="user_id" class="select">					<option value="0">请选择</option>					<foreach name="user" item="v">					<option value="{$v.user_id}" <if condition="$re['tutor_id'] eq $v['user_id']">selected</if>>{$v.username}</option>					</foreach>				</select>				</span> </div>		</div>		<div class="row cl">			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>开始时间：</label>			<div class="formControls col-xs-8 col-sm-9">				<input type="text" name="start_time" class="input-text" value="{$re['start_time']}" placeholder="开始时间" id="start_time" readonly />			</div>		</div>		<!--<div class="row cl">-->			<!--<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>结束时间：</label>-->			<!--<div class="formControls col-xs-8 col-sm-9">-->				<!--<input type="text" name="end_time" class="input-text" value="{$re['end_time']}" placeholder="结束时间" id="end_time" readonly />-->			<!--</div>-->		<!--</div>-->		<!--<div class="row cl">-->		<!--<label class="form-label col-xs-4 col-sm-2">接收对象：</label>-->		<!--<div class="formControls col-xs-8 col-sm-9">-->		<!--<div style="line-height:30px;text-align:center;display: inline-block">-->		<!--<input type="checkbox" name="object[]" id="all" onclick="check(this)" value="-1" class="w15 h15" <php>if(in_array(-1,$re['object']))echo 'checked';</php>  />-->		<!--<span style="vertical-align:middle;margin-left: -2px;">全体会员</span>-->		<!--</div>-->		<!--<volist name="grade" id="vo" key="k">-->		<!--<div style="line-height:30px;text-align:center;display: inline-block">-->		<!--<input type="checkbox" name="object[]" class="other" onclick="check(this)" value="{$vo.grade_id}" class="w15 h15" style="margin-left:15px" <php>if(in_array($vo['grade_id'],$re['object'])) echo 'checked';</php>  />-->		<!--<span style="vertical-align:middle;margin-left: -2px;">{$vo.name}</span>-->		<!--</div>-->		<!--</volist>-->		<!--</div>-->		<!--</div>-->		<div class="row cl">			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">				<button  class="submit btn btn-primary radius"  type="button"><i class="Hui-iconfont">&#xe632;</i> 保存并提交</button>				<!--<button onClick="article_save();" class="btn btn-secondary radius" type="button"><i class="Hui-iconfont">&#xe632;</i> 保存草稿</button>-->				<button onClick="removeIframe();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>				<input type="hidden" class="input-text" value="{$_GET['id']}" placeholder=""  name="id">			</div>		</div>	</form></div><!--请在下方写此页面业务相关的脚本--><script type="text/javascript">	$(function(){		var  content ;		KindEditor.ready(function(K) {			content = K.create('#content',{				allowFileManager : true,				uploadJson:"{:U('Tools/upload',['dirname'=>'video'])}"			});		});		KindEditor.ready(function(K) {			K.create();			var editor = K.editor({				allowFileManager : true,				uploadJson:"{:U('Tools/upload',['dirname'=>'video'])}"				//sdl:false			});			K('#uparea1').click(function() {				editor.loadPlugin('image', function() {					editor.plugin.imageDialog({						imageUrl : K('#image_1').val(),						clickFn : function(url, title, width, height, border, align) {							console.log(url);							$('#image1').css('background-image','url('+url+')').css('background-size','220px 160px');							K('#image_1').val(url);							// K('#getImgUrl').val(url);							editor.hideDialog();						}					});				});			});		});		$(".submit").click(function(){			commonAjaxSubmit();			return false;		});		$("#uparea1").mouseover(function(e){			$("#big").css({top:e.pageY,right:e.pageX});//鼠标定位一个点			var img = $('#image_1').val();			if(img.length !== 0) {				$("#big").html('<img src="' + $('#image_1').val() + '" width=380 height=300>');				$("#big").show();        //show：显示			}		});		$("#uparea1").mouseout(function(){			$("#big").hide();		});		$("#video").change(function(){			$('.url').html('正在上传中，请稍后...');			var formData = new FormData();			formData.append("video", $('#video')[0].files[0]);			console.log($('#video')[0].files[0]);			$.ajax({				url: "{:U('Tools/upload_video')}" ,				type: 'POST',				data: formData,				async: false,				cache: false,				contentType: false,				processData: false,				dataType:"JSON",				success: function (data) {					if(data['status'] == 'ok'){						$('#url').val(data['url']);						$('.url').html('上传成功！');					}else{						$('.url').html(data['info']);					}				},				error: function (data) {					console.log(data);				}			});		});		$(".preview").mouseover(function(e){			$("#big").css({top:e.pageY,right:e.pageX});//鼠标定位一个点			var data = $(this).attr('data');			console.log(data);			var img = $('#preview_'+data).val();			if(img.length !== 0) {				$("#big").html('<img src="' + img + '" width=380 height=300>');				$("#big").show();        //show：显示			}		});		$(".preview").mouseout(function(){			$("#big").hide();		});		$(".pic3").mouseover(function(e){			$("#big2").css({top:e.pageY,right:e.pageX});//鼠标定位一个点			$("#big2").html('<img src="'+this.src+'" width=380 height=300>');			$("#big2").show();        //show：显示		});		$(".pic3").mouseout(function(){			$("#big2").hide();		});	});	function area_linke1(value){		$.post("{:U('get_area')}", {value:value,type:1}, function(v){			$("#shi").html(v);		});	}	function area_linke2(value){		$.post("{:U('get_area')}", {value:value,type:2}, function(v){			$("#qu").html(v);		});	}</script><script type="text/javascript" src="/lib/layui/lay/dest/layui.all.js"></script><script>	layui.use('laydate', function(){		var laydate = layui.laydate;		var start = {			elem: '#start_time',			event: 'click', //触发事件			format: 'YYYY-MM-DD', //日期格式			istime: false, //是否开启时间选择			isclear: true, //是否显示清空			istoday: true, //是否显示今天			issure: true, //是否显示确认			festival: true,//是否显示节日			min: '1900-01-01 00:00:00', //最小日期			max: '2099-12-31 23:59:59', //最大日期			choose: function(datas){				$("#start_time").attr("value",datas);				end.min = datas; //开始日选好后，重置结束日的最小日期				end.start = datas //将结束日的初始值设定为开始日			}		};		var end = {			elem: '#end_time',			event: 'click', //触发事件			format: 'YYYY-MM-DD', //日期格式			istime: false, //是否开启时间选择			isclear: true, //是否显示清空			istoday: true, //是否显示今天			issure: true, //是否显示确认			festival: true,//是否显示节日			min: '1900-01-01 00:00:00', //最小日期			max: '2099-12-31 23:59:59', //最大日期			choose: function(datas){				$("#end_time").attr("value",datas);				start.max = datas; //结束日选好后，重置开始日的最大日期			}		};		document.getElementById('start_time').onclick = function(){			start.elem = this;			laydate(start);		}		document.getElementById('end_time').onclick = function(){			end.elem = this			laydate(end);		}	});</script>